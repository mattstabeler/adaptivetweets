"use strict";angular.module("adaptivetweetsApp",["ngResource","ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",resolve:{initialTweets:["tweetService",function(a){return a.getTweets()}]}}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("adaptivetweetsApp").controller("MainCtrl",["$scope","tweetService","initialTweets",function(a,b,c){a.tweets=c,a.loading=!1,a.lastError=void 0,a.lastMessage=void 0;var d=["coke","coca-cola","diet cola"];a.loadMoreTweets=function(){a.loading=!0,a.lastError=void 0,a.lastMessage=void 0,b.loadMoreTweets().then(function(c){a.lastMessage="Loaded "+c.length+" new messages",a.tweets=b.getTweets()},function(b){a.lastError=b.data.error.message})["finally"](function(){a.loading=!1})},a.hasKeyword=function(a){for(var b=0;b<d.length;b++)if(a.message.indexOf(d[b])>-1)return!0;return!1}}]),angular.module("adaptivetweetsApp").factory("tweetService",["$q","Tweet",function(a,b){var c=[],d={},e=function(a){var b=[];return angular.forEach(a,function(a){var d=f(a);d?d.count+=1:(a.count=1,c.push(a),b.push(a))}),b},f=function(a){for(var b=0;b<c.length;b++)if(c[b].id===a.id)return c[b];return!1};return d.getTweets=function(){return c},d.loadMoreTweets=function(){var c=a.defer();return b.loadTweets().$promise.then(function(a){var b=e(a);c.resolve(b)},function(a){console.error(a),c.reject(a)}),c.promise},d}]).factory("Tweet",["$resource",function(a){var b="http://adaptive-test-api.herokuapp.com/tweets.json",c={},d={loadTweets:{method:"GET",isArray:!0}};return a(b,c,d)}]);