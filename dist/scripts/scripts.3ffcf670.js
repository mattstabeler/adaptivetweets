"use strict";angular.module("adaptivetweetsApp",["ngResource","ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",resolve:{initialTweets:["tweetService",function(a){return a.getTweets()}]}}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("adaptivetweetsApp").controller("MainCtrl",["$scope","$filter","tweetService","initialTweets",function(a,b,c,d){a.tweets=d,a.loading=!1,a.lastError=void 0,a.lastMessage=void 0,a.userHandleFilter=void 0,a.showRaw=!1;var e=["coke","coca-cola","diet cola"];a.getTweets=function(){if(a.userHandleFilter){var c={user_handle:a.userHandleFilter};return b("filter")(a.tweets,c)}return a.tweets},a.loadMoreTweets=function(){a.loading=!0,a.lastError=void 0,a.lastMessage=void 0,c.loadMoreTweets().then(function(b){a.lastMessage="Loaded "+b.length+" new messages",a.tweets=c.getTweets()},function(b){a.lastError=b.data.error.message})["finally"](function(){a.loading=!1})},a.hasKeyword=function(a){for(var b=0;b<e.length;b++)if(a.message.indexOf(e[b])>-1)return!0;return!1},a.filterUser=function(b){a.userHandleFilter=b},a.clearFilter=function(){a.userHandleFilter=void 0},a.toggleShowRaw=function(){a.showRaw=!a.showRaw}}]),angular.module("adaptivetweetsApp").factory("tweetService",["$q","Tweet",function(a,b){var c=[],d={},e=function(a){var b=[];return angular.forEach(a,function(a){var d=f(a);d?d.count+=1:(a.count=1,c.push(a),b.push(a))}),b},f=function(a){for(var b=0;b<c.length;b++)if(c[b].id===a.id)return c[b];return!1};return d.getTweets=function(){return c},d.loadMoreTweets=function(){var c=a.defer();return b.loadTweets().$promise.then(function(a){var b=e(a);c.resolve(b)},function(a){console.error(a),c.reject(a)}),c.promise},d}]).factory("Tweet",["$resource",function(a){var b="http://adaptive-test-api.herokuapp.com/tweets.json",c={},d={loadTweets:{method:"GET",isArray:!0}};return a(b,c,d)}]);